# Simple cat (simple categorisation)
## Простой и легкий алгоритм классификации небольших текстов c использование н-грамм и косинусного расстояния между векторами

### Пример использования:
```
const test = new SimpleCat([
    {text: `Трудно понять человеческую душу, но душу свою собственную понять ещё трудней`, descriptor: {}},
    {text: `В человеке должно быть всё прекрасно: и лицо, и одежда, и душа, и мысли`, descriptor: {}},
    {text: `Душа не двери: если часто открывать, сквозняки продувают тебя насквозь`, descriptor: {}},
    {text: `Счастливая душа — это огромное достоинство`, descriptor: {}},
  ], smallTextModel);

const result = test.run('человеческая душа - прекрасна');

console.log(result);

{
  distances: Float32Array(4) [
    -0.5855400562286377,
    -0.20000000298023224,
    -0.8974359035491943,
    -0.8461538553237915
  ],
  maxCosIndex: 1
}
```
Результатом будут косинусные расстояния заранее заданных фраз от поисковой. Чем больше косинусное расстояние - тем ближе текст, т.к. чем меньше угол между векторами, тем больше косинус (cos 0 = 1)

### Работа алгоритма на примере двух слов: 
размышление, размышляющий
<br/>
Разобъем слова на н-граммы размером 3:

```
{
  'раз': [ 0 ],
  'азм': [ 1 ],
  'змы': [ 2 ],
  'мыш': [ 3 ],
  'ышл': [ 4 ],
  'шле': [ 5 ],
  'лен': [ 6 ],
  'ени': [ 7 ],
  'ние': [ 8 ]
}

{
  'раз': [ 0 ],
  'азм': [ 1 ],
  'змы': [ 2 ],
  'мыш': [ 3 ],
  'ышл': [ 4 ],
  'шля': [ 5 ],
  'ляю': [ 6 ],
  'яющ': [ 7 ],
  'ющи': [ 8 ],
  'щий': [ 9 ]
}
```

Ключом в этих хэш-массивах будет н-грамма, значением - индексы н-граммы. 
Шаблоном для поиска будет слово размышление.
<br/>
Поэтому вектор-шаблон, a = (1, 1, 1, 1, 1, 1, 1, 1, 1)
<br/>
Вектор совпадения, b = (1, 1, 1, 1, 1, -1, -1, -1, -1)
<br/>
cos(a,b) = 0.1111111119389534

```
const test = new SimpleCat([
    {text: `размышление`, descriptor: {}},
  ], smallTextModel);

const result = test.run('размышляющий');

console.log(result);

{ distances: Float32Array(1) [ 0.1111111119389534 ], maxCosIndex: 0 }
```

### Косинусное расстояние между векторами в плоскости:

![Косинусное расстояние между векторами в плоскости](https://github.com/MaratBektemirov/simple-cat/raw/master/distance.png)

a = (1,1)
<br/>
b = (2,2)
<br/>
c = (-1,-1)

cos(a,b) = 1
<br/>
cos(a,c) = -1